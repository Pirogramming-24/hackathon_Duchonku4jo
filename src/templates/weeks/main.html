{% extends "base.html" %}

{% block extra_head %}
<style>
    .wrap {
        max-width: 1100px;
        margin: 0 auto;
        padding: 40px 24px;
        position: relative;
    }

    .create-btn {
        position: absolute;
        right: 24px;
        top: 24px;
        background: #0BEC12;
        color: #000;
        border-radius: 999px;
        padding: 10px 18px;
        font-weight: 700;
    }

    .empty {
        height: 70vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        color: #0BEC12;
        font-size: 22px;
        font-weight: 700;
        line-height: 1.4;
    }

    .list {
        display: flex;
        flex-direction: column;
        gap: 18px;
        padding-top: 80px;
    }

    .card {
        background: #FCF9EA;
        color: #111;
        border-radius: 16px;
        padding: 22px 26px;
        font-size: 26px;
        font-weight: 800;
        position: relative;
    }

    .delete {
        position: absolute;
        right: 18px;
        top: 50%;
        transform: translateY(-50%);
        display: none;
    }

    .card:hover .delete {
        display: block;
    }

    .delete button {
        background: #D9D9D9;
        border: 0;
        border-radius: 999px;
        padding: 6px 14px;
        font-weight: 700;
        cursor: pointer;
    }

    .card-link {
        display: block;
        color: #111;
    }

    @media (max-width: 480px) {
        .wrap {
            padding: 18px 14px 40px;
        }

        /* 주차 생성 버튼: 상단 sticky + 풀폭 */
        .create-btn {
            position: sticky;
            top: 14px;
            left: 0;
            right: 0;
            margin: 0 auto 12px;
            width: 100%;
            max-width: 360px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            font-weight: 900;
            z-index: 10;
        }

        .empty {
            height: 60vh;
            font-size: 16px;
            padding: 0 10px;
        }

        .list {
            padding-top: 10px;
            /* 상단 버튼 때문에 80px 필요 없음 */
            gap: 12px;
        }

        .card {
            padding: 14px 14px;
            border-radius: 14px;
            font-size: 16px;
            line-height: 1.3;
        }

        /* 링크 영역이 삭제 버튼과 겹치지 않게 오른쪽 여백 확보 */
        .card-link {
            padding-right: 64px;
            word-break: keep-all;
        }

        /* 모바일에서는 hover가 없으니 삭제 버튼 항상 노출 */
        .delete {
            display: block;
            right: 12px;
        }

        .delete button {
            padding: 6px 10px;
            font-size: 12px;
            border-radius: 999px;
        }
    }

    /* 아주 작은 폰 (≤ 360px) */
    @media (max-width: 360px) {
        .card {
            font-size: 15px;
        }
    }
    
</style>
{% endblock %}

{% block content %}
<div class="wrap">
    <a href="{% url 'weeks:week_create' %}" class="create-btn">주차 생성</a>

    {% if not weeks %}
    <div class="empty">
        아직 생성된 주차가 없어요<br>
        팀 편성을 시작하려면 주차를 먼저 등록해 주세요
    </div>
    {% else %}
    <div class="list">
        {% for week in weeks %}
        <div class="card">
            <a class="card-link" href="{% url 'teams:team_home' week.id %}">
                {{ week.week_no }}주차 : {{ week.pr_name }} / {{ week.team_count }}조
            </a>

            <div class="delete">
                <form method="post" action="{% url 'weeks:week_delete' week.id %}">
                    {% csrf_token %}
                    <button type="submit">삭제</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}